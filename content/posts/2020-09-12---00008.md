---
title: Azure AD B2Cの始め方
date: "2020-09-12"
template: "post"
draft: false
slug: "tech-aadb2c-start"
category: "AzureADB2C"
tags:
  - "プログラミング学習"
  - "プログラミング初心者"
description: "本記事では、Azureが提供する認証・認可のためのサービスであるAzure AD B2Cの始め方を解説します"
# socialImage: "./media/image-2.jpg"
thumbnail: /media/image-2.jpg
---

## 導入

本記事では、Azureが提供する認証・認可のためのサービスであるAzure AD B2Cの始め方を解説します。

## 目次

1. AzureADB2Cとは
2. 事前準備
   1. Azureアカウントの作成
   2. Azureサブスクリプションの作成
3. AzureADB2Cのテナントの作成

## AzureADB2Cとは

[AzureADB2C](https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/overview)とは、Microsoftが提供する認証・認可のためのサービスです。  
自身のアプリケーションに以下のような機能を追加できます。  
- メールアドレスでのログイン機能
- SNSアカウントでのログイン機能
- 自身の管理するAPIに対するアクセストークンの発行

特にユーザ情報の管理をAzure側に一任できる点はとても魅力的です。  
アプリケーション側でユーザ情報を管理するとなるとセキュリティなど検討しなければなりませんが、AzureADB2Cを使うことで、それらの懸念を考慮しなくて良くなります。  

## 事前準備

### Azureアカウントの作成

事前準備としてAzureアカウントを作成し、[Azure](https://azure.microsoft.com/ja-jp/)にサインインしてください。  
サインインできたら[Azure Portal](https://portal.azure.com/#home)にアクセスします。  

### Azureサブスクリプションの作成

AzureADB2Cを利用するには、これから作成するテナントを何らかのサブスクリプションに紐付ける必要があります。  

Azure Portalのトップ > サブスクリプションに移動し、何らかのサブスクリプション名が表示されていればOKです。  
無料枠内で利用されている場合は、すでに無料枠用のサブスクリプションが作成されているはずです。  
以下は無料期間後に従量課金サブスクリプションにアップグレードした場合の表示です。  

![ScreenShot 2020-09-13 12.20.28.png](/media/00008/ScreenShot 2020-09-13 12.20.28.png)

※サブスクリプションIDは白塗りしています。  

![ScreenShot 2020-09-13 12.20.37.png](/media/00008/ScreenShot 2020-09-13 12.20.37.png)

## AzureADB2Cのテナントの作成

[Azure AD B2C テナントを作成する](https://docs.microsoft.com/ja-jp/azure/active-directory-b2c/tutorial-create-tenant#create-an-azure-ad-b2c-tenant)を参照しながら作業していきます。  

Azureポータルにログインし、サブスクリプションが設定されているディレクトリに移動します。  
※Azureの利用が初めてであれば、「既定のディレクトリ」という名前のディレクトリが表示されているかと思います。  

Azure Portalのトップ > すべてのリソース　を選択します。
![ScreenShot 2020-09-13 12.38.26.png](/media/00008/ScreenShot 2020-09-13 12.38.26.png)

リソースの作成を選択します。
![ScreenShot 2020-09-13 12.38.38.png](/media/00008/ScreenShot 2020-09-13 12.38.38.png)

検索フォームでAzure Active Directory B2Cを検索します。
![ScreenShot 2020-09-13 12.38.46.png](/media/00008/ScreenShot 2020-09-13 12.38.46.png)

作成を押下します。
![ScreenShot 2020-09-13 12.39.19.png](/media/00008/ScreenShot 2020-09-13 12.39.19.png)

作成方法を選択します。  
今回は新規作成ですので、「新しいAzureADB2Cテナントを作成する」を選択します。
![ScreenShot 2020-09-13 12.39.47.png](/media/00008/ScreenShot 2020-09-13 12.39.47.png)

テナント情報の設定を行います。
![ScreenShot 2020-09-13 12.42.18.png](/media/00008/ScreenShot 2020-09-13 12.42.18.png)

#### 組織名

この値がテナント名になります。  
値は任意ですが、AzureADB2C用テナントであることがわかるような名前が良いでしょう。  

#### 初期ドメイン名

ドメイン名を設定します。  
他のB2Cテナントのドメインと被らないようユニークな値にする必要があります。  

組織名と初期ドメイン名は同じ値を設定した方がわかりやすいかと思います。  
入力後、「確認及び作成」を押下します。  
問題なければ「検証に成功しました」と表示されます。
![ScreenShot 2020-09-13 12.45.45.png](/media/00008/ScreenShot 2020-09-13 12.45.45.png)

「作成」を押下し、しばらく待つと「テナントが正常に作成されました」と表示されます。
![ScreenShot 2020-09-13 12.48.04.png](/media/00008/ScreenShot 2020-09-13 12.48.04.png)

メッセージ内の「ここをクリックします」を押下すると、新規作成したAzureADB2Cテナントに切り替わります。  
右上のディレクトリ名が変わっているかと思います。  
![ScreenShot 2020-09-13 12.55.44.png](/media/00008/ScreenShot 2020-09-13 12.55.44.png)

以上でAzureADB2Cテナントの作成は完了です。  
具体的な操作方法は別記事にて紹介していきます。
